# DoubleZero Rewarder Configuration
# Copy this file to .env and modify as needed
# ALL environment variables are REQUIRED
# NOTICE the `__` dunders

# Network Configuration (devnet, testnet, mainnet-beta, mainnet)
DZ__NETWORK=testnet

# Logging
DZ__LOG_LEVEL=info

# RPC Configuration
DZ__RPC__DZ_URL=<doublezero_rpc_url>
# Solana read client - for reading chain data (leader schedules, epoch info, etc)
DZ__RPC__SOLANA_READ_URL=https://api.mainnet-beta.solana.com
# Solana write client - for writing rewards data (merkle roots)
DZ__RPC__SOLANA_WRITE_URL=https://api.testnet.solana.com
DZ__RPC__COMMITMENT=confirmed
DZ__RPC__RPS_LIMIT=10

# Shapley Configuration
DZ__SHAPLEY__OPERATOR_UPTIME=0.98
DZ__SHAPLEY__CONTIGUITY_BONUS=5.0
DZ__SHAPLEY__DEMAND_MULTIPLIER=1.2

# Program IDs
DZ__PROGRAMS__SERVICEABILITY_PROGRAM_ID=<dz_serviceability_program_id>
DZ__PROGRAMS__TELEMETRY_PROGRAM_ID=<dz_telemetry_program_id>

# Prefix Configuration
DZ__PREFIXES__DEVICE_TELEMETRY=doublezero_device_telemetry_aggregate
DZ__PREFIXES__INTERNET_TELEMETRY=doublezero_internet_telemetry_aggregate
DZ__PREFIXES__CONTRIBUTOR_REWARDS=dz_contributor_rewards
DZ__PREFIXES__REWARD_INPUT=dz_reward_input

# Internet Telemetry Thresholds
DZ__INET_LOOKBACK__MIN_COVERAGE_THRESHOLD=0.8
DZ__INET_LOOKBACK__MAX_EPOCHS_LOOKBACK=5
DZ__INET_LOOKBACK__MIN_SAMPLES_PER_LINK=20
DZ__INET_LOOKBACK__ENABLE_ACCUMULATOR=true
DZ__INET_LOOKBACK__DEDUP_WINDOW_US=10000000

# Telemetry Default Handling
DZ__TELEMETRY_DEFAULTS__MISSING_DATA_THRESHOLD=0.7
DZ__TELEMETRY_DEFAULTS__PRIVATE_DEFAULT_LATENCY_MS=1000.0
DZ__TELEMETRY_DEFAULTS__ENABLE_PREVIOUS_EPOCH_LOOKUP=true

# Scheduler Configuration
DZ__SCHEDULER__INTERVAL_SECONDS=300
DZ__SCHEDULER__STATE_FILE=/var/lib/doublezero/contributor-rewards.state
DZ__SCHEDULER__MAX_CONSECUTIVE_FAILURES=10
DZ__SCHEDULER__ENABLE_DRY_RUN=false

# Metrics Configuration (Optional)
# Uncomment to enable Prometheus metrics export
DZ__METRICS__ADDR=127.0.0.1:9090
